<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel=import href="mqtt-service.html">
<!--<link rel=import href="subscriber.html">-->
<link rel=import href="subscriber-toggle.html">
<link rel=import href="../bower_components/paper-button/paper-button.html">
<polymer-element name="mqtt-parent">
    <template>
        <mqtt-service id="mq" host="192.168.2.14" topics='{{topics}}' connection_state='{{connection_state}}' client="test.mosquitto.org" port="9001" debug="true"></mqtt-service>
        <!--        <mqtt-service host="test.mosquitto.org" topics='{{topics}}' client="test.mosquitto.org" port="8080" debug="true"></mqtt-service>-->
        <mqtt-subscriber-toggle topic="{{light1}}"></mqtt-subscriber-toggle>
        <mqtt-subscriber-toggle topic="{{light1}}"></mqtt-subscriber-toggle>
        {{connection_state}}
        <paper-button raised on-click={{reconnect}}>connect</paper-button>
        <paper-button raised on-click={{disconnect}}>disconnect</paper-button>
    </template>
    <script>
        Polymer("mqtt-parent", {
            ready: function () {
                this.light1 = "lights/1"
                this.light2 = "lights/2"
                this.topics = [this.light1, this.light2];
            },
            reconnect: function () {
                this.$.mq.connect();
                //                var mq = document.querySelector("mq");
                //                mq.connect();
            },
            disconnect: function () {this.$.mq.disconnect();}
            
        });
    </script>
</polymer-element>