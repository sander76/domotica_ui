<!--<link rel="import" href="../bower_components/polymer/polymer.html">-->



<dom-module id="mqtt-subscriber">
    <style>
/*
        :host {
            display: inline-block;
            min-width: 300px;
            max-width: 440px;
            margin: 20px;
            font-size: 1.2rem;
            font-weight: 300;
        }
*/
        .desc {
            flex-grow: 1;
        }
    </style>

    <template>
<!--        <paper-material>-->
            <div class="flex layout horizontal">
                <div class="desc">{{topic.ui_name}}</div>
                <span>{{value}}</span>
                <span>{{topic.ui_unit}}</span>
            </div>
<!--        </paper-material>-->
    </template>
</dom-module>
<script>
    Polymer({
        is: "mqtt-subscriber",
        properties: {
            topic: Object
        },
        created: function () {
            document.addEventListener('from-broker', this.interpret.bind(this));
        },
        interpret: function (message) {
            if (this.topic.sub.indexOf(message.detail.topic) >= 0) {
                this.value = message.detail.payload;
            }
        },
    });
</script>